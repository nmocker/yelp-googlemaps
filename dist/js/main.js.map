{"version":3,"sources":["main.js"],"names":["Main","theEvent","results","detail","resultsUl","document","querySelector","textContent","r","resultInfo","resultEl","createElement","appendChild","resultDiv","setAttribute","dataDiv","nameDiv","categoryDiv","statsDiv","imgDiv","imgEl","image_url","nameEl","name","ratingEl","rating","addressEl","location","display_address","phoneEl","display_phone","setupListeners","window","gmap","GoogleApi","$form","addEventListener","handleSearch","handleSearchResults","preventDefault","query","value","console","log","yelpApi","YelpApi","alert","businessSearch","term","customEvent","CustomEvent","dispatchEvent"],"mappings":"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","sourcesContent":["class Main {\n    constructor() {\n        this.setupListeners()\n\n        window.gmap = new GoogleApi()\n    }\n\n    setupListeners() {\n        var $form = document.querySelector('#place-search')\n        $form.addEventListener('submit', this.handleSearch)\n        document.addEventListener('got-results', this.handleSearchResults)\n        // document.addEventListener('place-results', this.handleSearchResults)\n    }\n\n    handleSearch(theEvent) {\n        theEvent.preventDefault()\n    \n        var query = document.querySelector('[name=\"query\"]').value\n        var location = document.querySelector('[name=\"location\"]').value\n    \n        console.log('searching for ', query)\n       \n\n        const yelpApi = new YelpApi()\n        if (query && location === '') {\n            alert('Please enter a keyword')\n        } else {\n            yelpApi.businessSearch({\n                term: query,\n                location: location,\n            })\n        }\n\n    \n        var customEvent = new CustomEvent('place-search', {detail : {query: query, location: location}})\n        document.dispatchEvent(customEvent)\n    }\n\n    handleSearchResults = (theEvent) => {\n        //show list or grid of results below the map\n        const results = theEvent.detail\n        const resultsUl = document.querySelector('.results-grid')\n        resultsUl.textContent = ''\n    \n\n        for (let r in results) {\n            const resultInfo = results[r]\n           \n\n            const resultEl = document.createElement('li')\n            resultsUl.appendChild(resultEl)\n\n            const resultDiv = document.createElement('div')\n            resultDiv.setAttribute('class', 'result-div')\n            resultEl.appendChild(resultDiv)\n\n            const dataDiv = document.createElement('div')\n            dataDiv.setAttribute('class', 'info-box')\n            resultDiv.appendChild(dataDiv)\n\n            const nameDiv = document.createElement('div')\n            nameDiv.setAttribute('class', 'name-box')\n            dataDiv.appendChild(nameDiv)\n\n            const categoryDiv = document.createElement('div')\n            categoryDiv.setAttribute('class', 'category-div')\n            dataDiv.appendChild(categoryDiv)\n\n            const statsDiv = document.createElement('div')\n            statsDiv.setAttribute('class', 'stats-div')\n            dataDiv.appendChild(statsDiv)\n\n            const imgDiv = document.createElement('div')\n            imgDiv.setAttribute('class', 'img-div')\n            resultDiv.appendChild(imgDiv)\n\n            const imgEl = document.createElement('img')\n            imgEl.setAttribute('src', resultInfo.image_url)\n            imgDiv.appendChild(imgEl)\n\n            const nameEl = document.createElement('h2')\n            nameDiv.appendChild(nameEl)\n            nameEl.textContent = resultInfo.name\n\n            const ratingEl = document.createElement('span')\n            statsDiv.appendChild(ratingEl)\n            ratingEl.setAttribute('class', 'rating-el')\n            ratingEl.textContent = resultInfo.rating + ' ‚≠ê'\n\n            const addressEl = document.createElement('span')\n            dataDiv.appendChild(addressEl)\n            addressEl.setAttribute('class', 'address-el')\n            addressEl.textContent = resultInfo.location.display_address\n\n            const phoneEl = document.createElement('span');\n\t\t\tdataDiv.appendChild(phoneEl);\n\t\t\tphoneEl.textContent = resultInfo.display_phone;\n\n        }\n\n\n    }\n}\n\n\n\nnew Main()"],"file":"main.js"}