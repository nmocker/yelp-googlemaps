{"version":3,"sources":["google-api.js"],"names":["GoogleApi","theEvent","console","log","service","google","maps","places","PlacesService","myMap","details","detail","request","query","bounds","getBounds","location","radius","textSearch","results","status","PlacesServiceStatus","OK","clearMarkers","newEvent","CustomEvent","document","dispatchEvent","place","geo","geometry","title","name","content","formatted_address","rating","addMarker","setupListeners","addEventListener","handlePlaceSearch","markers","forEach","marker","setMap","mbStadium","lat","lng","Map","getElementById","center","zoom","myInfoWindow","InfoWindow","maxWidth","position","info","Marker","map","locationLatLng","LatLng","addListener","setContent","open","extend"],"mappings":"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","sourcesContent":["class GoogleApi {\n\n    // note here which instance variables I'm using\n    myMap = null;\n    myInfoWindow = null;\n    markers = [];\n    \n\n    constructor() {\n        console.log('GoogleApi()')\n        this.setupListeners()\n    }\n    setupListeners() {\n        document.addEventListener('place-search', this.handlePlaceSearch)\n    }\n\n    handlePlaceSearch = (theEvent) => {\n        console.log('got a place search request', theEvent)\n\n        const service = new google.maps.places.PlacesService(this.myMap);\n        \n\n        const details = theEvent.detail\n        const request = {\n            query: details['query'],\n            bounds: this.myMap.getBounds(),\n            location: details['location'],\n            radius: 10000,\n        }\n\n        // for (let d in details) {\n        //     const business = details[d]\n        //     const businessCoordinates = {\n        //         lat: business.coordinates.latitude,\n        //         lng: business.coordinates.longitude,\n        //     }\n\n            \n            \n\n        // }\n       \n\n\n        service.textSearch(request, (results, status) => {\n            if (status == google.maps.places.PlacesServiceStatus.OK) {\n                console.log('got results', results)\n\n                // clear any previous markers\n                this.clearMarkers()\n\n\n                const newEvent = new CustomEvent('place-results', {detail: results})\n                document.dispatchEvent(newEvent)\n\n                for (let place of results) {\n                    let geo = place.geometry.location\n                    let title = place.name\n                    let content = `<h2>${place.name}</h2>` + `<h2>${place.formatted_address}</h2>` + `<h2>${place.rating} ‚≠ê</h2>`  \n                    \n                   \n\n\n                    \n                    this.addMarker(geo, { title: title, content: content})\n\n                    \n                }\n            }\n        })\n    }\n\n    clearMarkers() {\n        this.markers.forEach(marker => {\n            marker.setMap(null)\n        })\n        this.markers = []\n    }\n\n    setup() {\n        console.log('setting up a map')\n    \n        const mbStadium = { lat: 33.7555, lng: -84.4010 };\n        this.myMap = new google.maps.Map(document.getElementById('my-map'), {\n            center: mbStadium,\n            zoom: 15\n        })\n\n\n       this.myInfoWindow = new google.maps.InfoWindow({\n            content: '',\n            maxWidth: 200,\n        })\n\n        this.addMarker(mbStadium, {title: \"Mercedes-Benz Stadium\", content: '<h2>Mercedes-Benz Stadium</h2>'})\n    }\n\n\n    // info will be an object with various bits of info\n    addMarker(position, info) {\n        const marker = new google.maps.Marker({\n            map: this.myMap,\n            position: position,\n            title: info['title'],\n        }) \n\n        const locationLatLng = new google.maps.LatLng(\n            marker.position.lat(),\n            marker.position.lng(),\n        )\n        \n        marker.addListener('click', () => {\n            this.myInfoWindow.setContent(info['content'])\n            this.myInfoWindow.open(this.myMap, marker)\n        })\n        this.myMap.extend\n        // this.myMap.panToBounds(this.bounds)\n    }\n}\n"],"file":"google-api.js"}