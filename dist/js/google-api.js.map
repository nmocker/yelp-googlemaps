{"version":3,"sources":["google-api.js"],"names":["GoogleApi","theEvent","console","log","service","google","maps","places","PlacesService","myMap","details","detail","request","query","bounds","getBounds","textSearch","results","status","PlacesServiceStatus","OK","clearMarkers","newEvent","CustomEvent","document","dispatchEvent","place","geo","geometry","location","title","name","content","formatted_address","rating","addMarker","setupListeners","addEventListener","handlePlaceSearch","markers","forEach","marker","setMap","mbStadium","lat","lng","Map","getElementById","center","zoom","myInfoWindow","InfoWindow","maxWidth","position","info","Marker","map","push","addListener","setContent","open"],"mappings":"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","sourcesContent":["class GoogleApi {\n\n    // note here which instance variables I'm using\n    myMap = null;\n    myInfoWindow = null;\n    markers = [];\n\n    constructor() {\n        console.log('GoogleApi()')\n        this.setupListeners()\n    }\n    setupListeners() {\n        document.addEventListener('place-search', this.handlePlaceSearch)\n    }\n\n    handlePlaceSearch = (theEvent) => {\n        console.log('got a place search request', theEvent)\n\n        const service = new google.maps.places.PlacesService(this.myMap);\n\n\n\n        const details = theEvent.detail\n        const request = {\n            query: details['query'],\n            bounds: this.myMap.getBounds()\n            // location: details['location'],\n            // radius: 10000\n\n        }\n        service.textSearch(request, (results, status) => {\n            if (status == google.maps.places.PlacesServiceStatus.OK) {\n                console.log('got results', results)\n\n                // clear any previous markers\n                this.clearMarkers()\n\n                const newEvent = new CustomEvent('place-results', {detail: results})\n                document.dispatchEvent(newEvent)\n\n                for (let place of results) {\n                    let geo = place.geometry.location\n                    let title = place.name\n                    let content = `<h2>${place.name}</h2>` + `<h2>${place.formatted_address}</h2>` + `<h2>${place.rating} ‚≠ê</h2>`\n\n\n                    this.addMarker(geo, { title: title, content: content})\n                }\n            }\n        })\n    }\n\n    clearMarkers() {\n        this.markers.forEach(marker => {\n            marker.setMap(null)\n        })\n        this.markers = []\n    }\n\n    setup() {\n        console.log('setting up a map')\n    \n        const mbStadium = { lat: 33.7555, lng: -84.4010 };\n        this.myMap = new google.maps.Map(document.getElementById('my-map'), {\n            center: mbStadium,\n            zoom: 15\n        })\n\n\n       this.myInfoWindow = new google.maps.InfoWindow({\n            content: '',\n            maxWidth: 200,\n        })\n\n        this.addMarker(mbStadium, {title: \"Mercedes-Benz Stadium\", content: '<h2>Mercedes-Benz Stadium</h2>'})\n    }\n\n    // info will be an object with various bits of info\n    addMarker(position, info) {\n        const marker = new google.maps.Marker({\n            map: this.myMap,\n            position: position,\n            title: info['title'],\n    \n\n        }) \n\n        this.markers.push(marker)\n      \n\n        \n        marker.addListener('click', () => {\n            this.myInfoWindow.setContent(info['content'])\n            this.myInfoWindow.open(this.myMap, marker)\n        })\n    }\n}\n"],"file":"google-api.js"}